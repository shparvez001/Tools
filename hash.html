<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>-->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Global styling */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            }

        body {
          font-family: 'Roboto', sans-serif;
          /* background-image: url("img/back.jpg"); */
          background: linear-gradient(45deg,rgba(118, 8, 245, 0.3), rgba(211, 12, 12, 0.3));
          margin: 0;
          padding: 0;
          color: #333;
          display: block;
          /* flex-direction: column;
          justify-content: flex-start; */
          align-items: center;
          min-height: 100vh;
        }

        .glass {
            opacity: 0.95;
            border-radius: 12px; 
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); /* Soft shadow for depth */
            backdrop-filter: blur(10px); /* Optional: adds a blur effect to the background */
            margin-top: 20px;
            margin-bottom: 20px;
            /* color: #fff; */
        }
    
        h1 {
          font-size: 2.5rem;
          color: #333;
          margin-top: 30px;
          text-align: center;
        }
    
        /* Form and Input Elements */
        .container {
          width: 100%;
          max-width: 1400px;
          min-width: 300px;
          background: rgba(255, 255, 255, 0.8);
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
          /* margin: 20px; */
          margin-top: 20px;
          margin-bottom: 20px;
        }
    
        .input-section, .dropdown-section, .output-section, .file-section {
            margin-bottom: 15px;
        }

        .output-section{
            margin-top: 20px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 1400px;
            min-width: 300px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            color: #333;
            word-wrap: break-word;
        }
    
        label {
            display: block;
            font-weight: 500;
            margin-bottom: 5px;
        }

        textarea {
            width: 100%;
            height: 60px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            resize: vertical;
            }

        select {
            width: 100%;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        .drag-area {
            border: 2px dashed #ccc;
            border-radius: 4px;
            padding: 20px;
            cursor: pointer;
            color: #888;
            transition: background-color 0.3s;
        }

        .drag-area.dragging {
            background-color: #e0e0e0;
        }            

    button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #45a049;
    }

    #outputHash {
      height: 80px;
      resize: none;
    }

    .error {
      border-color: red;
      background-color: #fdd;
    }

    .error-message {
      color: red;
      font-size: 12px;
      margin-top: 5px;
    }

    .info-message {
      font-size: 12px;
      color: #555;
      margin-top: 10px;
    }

    .hash-source {
      font-size: 14px;
      color: #444;
      margin-top: 10px;
    }
      </style>
    <title>SHP's Hash Tools</title>
    <link rel="icon" type="image/x-icon" href="img/favicon.png">
</head>

<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img src="img/logo.png" alt="SHP's Most used toolset" height="30"></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="/">Home</a></li>
                <li><a href="pdfTools.html">PDF Tools</a></li>
                <li><a href="ocr.html">OCR</a></li>
                <li><a href="color.html">Color</a></li>
                <li><a href="heic.html">HEIC</a></li>
                <li><a href="resistor.html">Resistance</a></li>
                <li><a href="capacitor.html">Capacitance</a></li>
                <li><a href="terminalVelocity.html">Terminal Velocity</a></li>
                <li><a href="math.html">Math Tools</a></li>
            </ul>
        </div>
    </div>
</nav>

<body>
    <br><br><br>
    <div class="container-fluid" style="position: relative">
        <div class="row">
            <div style="color: blue;" class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                <div style="background: #dcfba5;" class="container-fluid glass">
                    <!-- <h1>OCR Tool</h1>
                    <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3" style="display: none;"></div> -->
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <!-- Main container for Hash Generation -->
                        <div class="container">
                            <h1>Hash Generator</h1>
                        
                            <!-- Instructions Section -->
                            <div class="info-message">
                              <p>Please enter text or upload a file to generate the hash.</p>
                            </div>
                        
                            <div class="input-section">
                              <label for="inputText">Enter Text:</label>
                              <textarea id="inputText" placeholder="Enter text to generate hash"></textarea>
                            </div>
                        
                            <div class="dropdown-section">
                              <label for="hashAlgorithm">Choose Hash Algorithm:</label>
                              <!-- <select id="hashAlgorithm">
                                <option value="SHA-256">SHA-256</option>
                                <option value="SHA-1">SHA-1</option>
                                <option value="MD5">MD5</option>
                              </select> -->
                              <select id="hashAlgorithm">
                                <option value="SHA-256">SHA-256</option>
                                <option value="SHA-1">SHA-1</option>
                                <option value="SHA-512">SHA-512</option>
                                <option value="SHA-384">SHA-384</option>
                                <option value="SHA-224">SHA-224</option>
                                <option value="MD5">MD5</option>
                                <option value="SHA3-256">SHA3-256</option>
                                <option value="SHA3-512">SHA3-512</option>
                                <option value="BLAKE2b">BLAKE2b</option>
                                <option value="RIPEMD-160">RIPEMD-160</option>
                                <option value="Whirlpool">Whirlpool</option>
                              </select>
                            </div>
                        
                            <div class="file-section">
                              <label for="fileInput">Upload File or Drag & Drop:</label>
                              <input type="file" id="fileInput" style="display: none;">
                              <div class="drag-area" id="dragArea">Drag & Drop file here or click to upload</div>
                              <p id="fileName" style="margin-top: 10px; color: #333;"></p>
                              <p id="fileErrorMessage" class="error-message" style="display: none;">Please upload a file or enter text.</p>
                            </div>
                        
                            <button id="generateButton">Generate Hash</button>
                        
                            <div class="output-section">
                              <label for="outputHash">Generated Hash:</label>
                              <textarea id="outputHash" readonly placeholder="Hash will appear here"></textarea>
                              <button id="copyButton">Copy to Clipboard</button>
                        
                              <!-- Display the source of hash -->
                              <p id="hashSource" class="hash-source"></p>
                            </div>                        
                          </div>
                    </div>
                </div>            
            </div>
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" style="display: block;">
                <div style="background: #a5fbb8;" class="container-fluid glass">
                    <!-- Option for Hash Comparison -->
                    <h1>Compare Hashes of Files</h1>
                    <div class="file-section">
                        <label for="fileInput1">Upload First File:</label>
                        <input type="file" id="fileInput1" style="display: none;">
                        <div class="drag-area" id="dragArea1">Drag & Drop first file here or click to upload</div>
                        <p id="fileName1" style="margin-top: 10px;"></p>
                    </div>
                    <div class="file-section">
                        <label for="fileInput2">Upload Second File:</label>
                        <input type="file" id="fileInput2" style="display: none;">
                        <div class="drag-area" id="dragArea2">Drag & Drop second file here or click to upload</div>
                        <p id="fileName2" style="margin-top: 10px;"></p>
                    </div>
                    <button id="compareButton">Compare Hashes</button>
                    <div class="output-section">
                        <div class="hash-display" id="file1HashDisplay"></div>
                        <div class="hash-display" id="file2HashDisplay"></div>
                        <p id="compareResult" style="color: #333; font-weight: bold;">Hash report will be displayed here</p>
                    </div>
                </div>
            </div>
        </div>    
        <!-- Include external libraries for unsupported algorithms -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/js-md5/0.7.3/js/md5.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/js-sha3/0.8.0/sha3.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/blakejs@1.1.0/blake2b.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ripemd160/2.0.2/ripemd160.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/whirlpool/1.0.0/whirlpool.min.js"></script>
        <script>
            async function generateHash(data, algorithm) {
                // const hashBuffer = await crypto.subtle.digest(algorithm, data);
                // const hashArray = Array.from(new Uint8Array(hashBuffer));
                // return hashArray.map(byte => byte.toString(16).padStart(2, '0')).join('');
                let hash;
                try {
                    if (algorithm === 'MD5') {
                        console.log("MD5 detected");
                        
                        //hash = md5(inputText);  // Using js-md5 library
                    } else {
                        // Fallback to native crypto.subtle.digest
                        const hashBuffer = await crypto.subtle.digest(algorithm, data);
                        const hashArray = Array.from(new Uint8Array(hashBuffer));
                        return hashArray.map(byte => byte.toString(16).padStart(2, '0')).join('');
                    }
                    } catch (error) {
                    console.error("An error occurred:", error.message);
                    alert("Error ocurred during hash calculation");
                        console.log("Execution completed.");
                    }
            }
    
            document.getElementById("generateButton").addEventListener("click", async () => {
                const text = document.getElementById("inputText").value;
                const algorithm = document.getElementById("hashAlgorithm").value;
                const fileInput = document.getElementById("fileInput");
                const fileErrorMessage = document.getElementById("fileErrorMessage");
                const hashSource = document.getElementById("hashSource");
                let data;
                let sourceMessage = '';
    
                if (!text && fileInput.files.length === 0) {
                    fileErrorMessage.style.display = 'block';
                    return;
                } else {
                    fileErrorMessage.style.display = 'none';
                }
    
                if (text) {
                    data = new TextEncoder().encode(text);
                    sourceMessage = 'Hash generated from the entered text';
                } else {
                    const file = fileInput.files[0];
                    data = await file.arrayBuffer();
                    sourceMessage = 'Hash generated from the uploaded file';
                }
    
                const hash = await generateHash(data, algorithm);
                document.getElementById("outputHash").value = hash;
                hashSource.innerText = sourceMessage;
            });


            //Copy function
            document.getElementById("copyButton").addEventListener("click", () => {
                const outputHash = document.getElementById("outputHash");
                outputHash.select();
                document.execCommand('copy');
            });
    
            const dragAreas = [document.getElementById("dragArea"), document.getElementById("dragArea1"), document.getElementById("dragArea2")];
            const fileInputs = [document.getElementById("fileInput"), document.getElementById("fileInput1"), document.getElementById("fileInput2")];
            const fileNames = [document.getElementById("fileName"), document.getElementById("fileName1"), document.getElementById("fileName2")];
    
            dragAreas.forEach((area, index) => {
                area.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    area.classList.add('dragging');
                });
    
                area.addEventListener('dragleave', () => {
                    area.classList.remove('dragging');
                });
    
                area.addEventListener('drop', (e) => {
                    e.preventDefault();
                    area.classList.remove('dragging');
                    const file = e.dataTransfer.files[0];
                    fileInputs[index].files = e.dataTransfer.files;
                    fileNames[index].textContent = file.name;
                });
    
                area.addEventListener('click', () => {
                    fileInputs[index].click();
                });
    
                fileInputs[index].addEventListener('change', (e) => {
                    fileNames[index].textContent = e.target.files[0].name;
                });
            });
    
            document.getElementById("compareButton").addEventListener("click", async () => {
                const fileInput1 = document.getElementById("fileInput1");
                const fileInput2 = document.getElementById("fileInput2");
                const compareResult = document.getElementById("compareResult");
                const file1HashDisplay = document.getElementById("file1HashDisplay");
                const file2HashDisplay = document.getElementById("file2HashDisplay");
    
                if (fileInput1.files.length === 0 || fileInput2.files.length === 0) {
                    compareResult.textContent = 'Please upload both files.';
                    return;
                }
    
                const file1 = fileInput1.files[0];
                const file2 = fileInput2.files[0];
    
                const [hash1, hash2] = await Promise.all([
                    generateHash(await file1.arrayBuffer(), 'SHA-256'),
                    generateHash(await file2.arrayBuffer(), 'SHA-256')
                ]);
    
                file1HashDisplay.textContent = `File 1 Hash (SHA-256): ${hash1}`;
                file2HashDisplay.textContent = `File 2 Hash (SHA-256): ${hash2}`;
    
                if (hash1 === hash2) {
                    compareResult.textContent = 'The files have identical hashes.';
                } else {
                    compareResult.textContent = 'The files have different hashes.';
                }
            });
        </script>    
    </div>
</body>

</html>
